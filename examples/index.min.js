!function(){"use strict";class t{constructor(t=0,s=0){this.x=t,this.y=s}set(t=0,s=0){return this.x=t,this.y=s,this}add(t){this.x+=t.x,this.y+=t.y}sub(t){this.x-=t.x,this.y-=t.y}mul(t){this.x*=t,this.y*=t}static add(s,i){return new t(s.x+i.x,s.y+i.y)}static addV(t,s,i){return i.set(t.x+s.x,t.y+s.y)}static sub(s,i){return new t(s.x-i.x,s.y-i.y)}static subV(t,s,i){return i.set(t.x-s.x,t.y-s.y)}static mulVV(s,i){return new t(s.x*i.x,s.y*i.y)}static mulSV(s,i){return new t(s*i.x,s*i.y)}static mulSVV(t,s,i){return i.set(t*s.x,t*s.y)}static abs(s){return new t(Math.abs(s.x),Math.abs(s.y))}static neg(s){return new t(-s.x,-s.y)}static dot(t,s){return t.x*s.x+t.y*s.y}static dotXYV(t,s,i){return t*i.x+s*i.y}static dotXY(t,s,i,e){return t*i+s*e}static crossVV(t,s){return t.x*s.y-t.y*s.x}static crossVXY(t,s,i){return t.x*i-t.y*s}static crossXY(t,s,i,e){return t*e-s*i}static crossVS(s,i){return new t(i*s.y,-i*s.x)}static crossSV(s,i){return new t(-s*i.y,s*i.x)}static crossSVV(t,s,i){return i.set(-t*s.y,t*s.x)}}class s{constructor(s,i){this.position=new t,this.rotation=0,this.velocity=new t,this.angularVelocity=0,this.force=new t,this.torque=0,this.width=new t,this.friction=.2,this.mass=Number.MAX_VALUE,this.invMass=0,this.I=Number.MAX_VALUE,this.invI=0,this.id=0,this.set(s,i)}set(t,s){return this.width=t,this.mass=s,s<Number.MAX_VALUE?(this.invMass=1/s,this.I=s*(t.x*t.x+t.y*t.y)/12,this.invI=1/this.I):(this.invMass=0,this.I=Number.MAX_VALUE,this.invI=0),this}addForce(t){return this.force.add(t),this}}class i{constructor(t=0,s=0,i=0,e=0){this.a=t,this.c=s,this.b=i,this.d=e}set(t){const s=Math.cos(t),i=Math.sin(t);return this.a=s,this.c=i,this.b=-i,this.d=s,this}setValues(t,s,i,e){return this.a=t,this.c=s,this.b=i,this.d=e,this}setFromVec2(t,s){return this.a=t.x,this.c=t.y,this.b=s.x,this.d=s.y,this}mulMM(t,s){return this.a=t.a*s.a+t.c*s.c,this.c=t.b*s.a+t.d*s.c,this.b=t.a*s.b+t.c*s.d,this.d=t.b*s.b+t.d*s.d,this}transpose(t){const s=Math.cos(t),i=Math.sin(t);return this.a=s,this.c=-i,this.b=i,this.d=s,this}static add(t,s){return new i(t.a+s.a,t.c+s.c,t.b+s.b,t.d+s.d)}static addV(t,s,i){return i.setValues(t.a+s.a,t.c+s.c,t.b+s.b,t.d+s.d)}static mulMV(s,i){return new t(s.a*i.x+s.b*i.y,s.c*i.x+s.d*i.y)}static mulMVV(t,s,i){return i.set(t.a*s.x+t.b*s.y,t.c*s.x+t.d*s.y),i}static mulMM(t,s){const e=t.a*s.a+t.c*s.c,n=t.b*s.a+t.d*s.c,o=t.a*s.b+t.c*s.d,a=t.b*s.b+t.d*s.d;return new i(e,n,o,a)}static abs(t){return new i(Math.abs(t.a),Math.abs(t.c),Math.abs(t.b),Math.abs(t.d))}static absM(t,s){return s.a=Math.abs(t.a),s.c=Math.abs(t.c),s.b=Math.abs(t.b),s.d=Math.abs(t.d),s}static transpose(t){return new i(t.a,t.b,t.c,t.d)}static transposeM(t,s){return s.a=t.a,s.c=t.b,s.b=t.c,s.d=t.d,s}static invert(t){const s=t.a,e=t.c,n=t.b,o=t.d;let a=1/(s*o-n*e);return new i(a*o,a*-n,a*-e,a*s)}static invertV(t,s){const i=t.a,e=t.c,n=t.b,o=t.d;let a=1/(i*o-n*e);return s.setValues(a*o,a*-n,a*-e,a*i)}}let e=new i,n=new i,o=new i,a=new i,r=new i,h=new i,l=new i,c=new i,d=new i,y=new t,u=new t,x=new t,b=new t,E=new t;function M(t,s,i){return Math.max(s,Math.min(t,i))}var v,V;!function(t){t[t.FACE_A_X=0]="FACE_A_X",t[t.FACE_A_Y=1]="FACE_A_Y",t[t.FACE_B_X=2]="FACE_B_X",t[t.FACE_B_Y=3]="FACE_B_Y"}(v||(v={})),function(t){t[t.NO_EDGE=0]="NO_EDGE",t[t.EDGE1=1]="EDGE1",t[t.EDGE2=2]="EDGE2",t[t.EDGE3=3]="EDGE3",t[t.EDGE4=4]="EDGE4"}(V||(V={}));class p{constructor(){this.inEdge1=V.NO_EDGE,this.outEdge1=V.NO_EDGE,this.inEdge2=V.NO_EDGE,this.outEdge2=V.NO_EDGE}}class w{constructor(){this.e=new p,this.value=0}flip(){const t=this.e,s=t.inEdge1,i=t.outEdge1;t.inEdge1=t.inEdge2,t.inEdge2=s,t.outEdge1=t.outEdge2,t.outEdge2=i}}class m{constructor(t,s){this.x=t,this.y=s,this.fp=new w}set(t,s){return this.x=t,this.y=s,this}}function f(t,s,i,e,n,o){const a=-(e.a*n+e.c*o),r=-(e.b*n+e.d*o),h=Math.abs(a),l=Math.abs(r),c=new m(0,0),d=new m(0,0);h>l?Math.sign(a)>0?(c.set(s.x,-s.y),c.fp.e.inEdge2=V.EDGE3,c.fp.e.outEdge2=V.EDGE4,d.set(s.x,s.y),d.fp.e.inEdge2=V.EDGE4,d.fp.e.outEdge2=V.EDGE1):(c.set(-s.x,s.y),c.fp.e.inEdge2=V.EDGE1,c.fp.e.outEdge2=V.EDGE2,d.set(-s.x,-s.y),d.fp.e.inEdge2=V.EDGE2,d.fp.e.outEdge2=V.EDGE3):Math.sign(r)>0?(c.set(s.x,s.y),c.fp.e.inEdge2=V.EDGE4,c.fp.e.outEdge2=V.EDGE1,d.set(-s.x,s.y),d.fp.e.inEdge2=V.EDGE1,d.fp.e.outEdge2=V.EDGE2):(c.set(-s.x,-s.y),c.fp.e.inEdge2=V.EDGE2,c.fp.e.outEdge2=V.EDGE3,d.set(s.x,-s.y),d.fp.e.inEdge2=V.EDGE3,d.fp.e.outEdge2=V.EDGE4);let y=i.x+(e.a*c.x+e.b*c.y),u=i.y+(e.c*c.x+e.d*c.y);c.set(y,u),y=i.x+(e.a*d.x+e.b*d.y),u=i.y+(e.c*d.x+e.d*d.y),d.set(y,u),t[0]=c,t[1]=d}class _{constructor(t,s,i,e,n,o){this.positionX=e,this.positionY=n,this.normalX=s,this.normalY=i,this.r1X=0,this.r1Y=0,this.r2X=0,this.r2Y=0,this.separation=t,this.Pn=0,this.Pt=0,this.Pnb=0,this.massNormal=0,this.massTangent=0,this.bias=0,this.feature=o}}function g(s,i,e,n,o,a){let r=0,h=t.dotXY(e,n,i[0].x,i[0].y)-o,l=t.dotXY(e,n,i[1].x,i[1].y)-o;if(h<=0&&(s[r]=i[0],r++),l<=0&&(s[r]=i[1],r++),h*l<0){let t=h/(h-l),e=new m(i[0].x+t*(i[1].x-i[0].x),i[0].y+t*(i[1].y-i[0].y));h>0?(e.fp=i[0].fp,e.fp.e.inEdge1=a,e.fp.e.inEdge2=V.NO_EDGE):(e.fp=i[1].fp,e.fp.e.outEdge1=a,e.fp.e.outEdge2=V.NO_EDGE),s[r]=e,r++}return r}let X=new t,Y=new t,A=new i,I=new i,D=new i,G=new i,P=new t,C=new t,S=new t,B=new i,F=new i,N=new i,T=new t,k=new t,O=new t,L=new t,U=new t,j=new t;function q(s,e,n){X.set(.5*e.width.x,.5*e.width.y),Y.set(.5*n.width.x,.5*n.width.y);let o=e.position,a=n.position;if(A.set(e.rotation),I.set(n.rotation),D.transpose(e.rotation),G.transpose(n.rotation),P.set(a.x-o.x,a.y-o.y),C.set(D.a*P.x+D.b*P.y,D.c*P.x+D.d*P.y),S.set(G.a*P.x+G.b*P.y,G.c*P.x+G.d*P.y),B.mulMM(D,I),i.absM(B,F),i.transposeM(F,N),k.set(Math.abs(C.x)-X.x,Math.abs(C.y)-X.y),i.mulMVV(F,Y,O),T.set(k.x-O.x,k.y-O.y),T.x>0||T.y>0)return 0;if(i.mulMVV(N,X,j),U.set(Math.abs(S.x)-j.x,Math.abs(S.y)-j.y),L.set(U.x-Y.x,U.y-Y.y),L.x>0||L.y>0)return 0;let r=v.FACE_A_X,h=T.x,l=0,c=0;C.x>0?(l=A.a,c=A.c):(l=-A.a,c=-A.c);T.y>.95*h+.01*X.y&&(r=v.FACE_A_Y,h=T.y,C.y>0?(l=A.b,c=A.d):(l=-A.b,c=-A.d)),L.x>.95*h+.01*Y.x&&(r=v.FACE_B_X,h=L.x,S.x>0?(l=I.a,c=I.c):(l=-I.a,c=-I.c)),L.y>.95*h+.01*Y.y&&(r=v.FACE_B_Y,h=L.y,S.y>0?(l=I.b,c=I.d):(l=-I.b,c=-I.d));let d=l,y=c,u=[],x=null;if(r===v.FACE_A_X?x=function(s,i,e,n,o,a,r,h,l){let c=t.dotXYV(r,h,s)+o.x,d=e.b,y=e.d,u=t.dotXYV(d,y,s),x=-u+o.y,b=u+o.y,E=[];f(E,a,i,n,r,h);let M=[],v=g(M,E,-d,-y,x,V.EDGE3);return v<2?null:(v=g(l,M,d,y,b,V.EDGE1),v<2?null:c)}(o,a,A,I,X,Y,d,y,u):r===v.FACE_A_Y?x=function(s,i,e,n,o,a,r,h,l){let c=t.dotXYV(r,h,s)+o.y,d=e.a,y=e.c,u=t.dotXYV(d,y,s),x=-u+o.x,b=u+o.x,E=[];f(E,a,i,n,r,h);let M=[],v=g(M,E,-d,-y,x,V.EDGE2);return v<2?null:(v=g(l,M,d,y,b,V.EDGE4),v<2?null:c)}(o,a,A,I,X,Y,d,y,u):r===v.FACE_B_X?(d=-l,y=-c,x=function(s,i,e,n,o,a,r,h,l){let c=t.dotXYV(r,h,i)+a.x,d=n.b,y=n.d,u=t.dotXYV(d,y,i),x=-u+a.y,b=u+a.y,E=[];f(E,o,s,e,r,h);let M=[],v=g(M,E,-d,-y,x,V.EDGE3);return v<2?null:(v=g(l,M,d,y,b,V.EDGE1),v<2?null:c)}(o,a,A,I,X,Y,d,y,u)):r===v.FACE_B_Y&&(d=-l,y=-c,x=function(s,i,e,n,o,a,r,h,l){let c=t.dotXYV(r,h,i)+a.y,d=n.a,y=n.c,u=t.dotXYV(d,y,i),x=-u+a.x,b=u+a.x,E=[];f(E,o,s,e,r,h);let M=[],v=g(M,E,-d,-y,x,V.EDGE2);return v<2?null:(v=g(l,M,d,y,b,V.EDGE4),v<2?null:c)}(o,a,A,I,X,Y,d,y,u)),null===x)return 0;let b=0;for(let i=0;i<2;i++){let e=t.dotXY(d,y,u[i].x,u[i].y)-x;e<=0&&(s[b]=new _(e,l,c,u[i].x-e*d,u[i].y-e*y,u[i].fp),r!==v.FACE_B_X&&r!==v.FACE_B_Y||s[b].feature.flip(),b++)}return b}class J{constructor(t,s,i){this.world=t,s.id<i.id?(this.body1=s,this.body2=i):(this.body1=i,this.body2=s),this.contacts=[],this.numContacts=q(this.contacts,this.body1,this.body2),this.friction=Math.sqrt(this.body1.friction*this.body2.friction)}update(t,s){let i=[],e=this.contacts,n=this.numContacts,o=this.world.warmStarting;for(let a=0;a<s;a++){let s=t[a],r=-1;for(let t=0;t<n;t++){let i=e[t];if(s.feature.value===i.feature.value){r=t;break}}if(r>-1){let t=e[r];o?(s.Pn=t.Pn,s.Pt=t.Pt,s.Pnb=t.Pnb):(s.Pn=0,s.Pt=0,s.Pnb=0),i[a]=s}else i[a]=t[a]}this.contacts=i,this.numContacts=s}preStep(s){let i=this.contacts,e=this.numContacts,n=this.world.positionCorrection?.2:0,o=this.body1,a=this.body2,r=this.world.accumulateImpulses;for(let h=0;h<e;h++){let e=i[h],l=e.positionX-o.position.x,c=e.positionY-o.position.y,d=e.positionX-a.position.x,y=e.positionY-a.position.y,u=t.dotXY(l,c,e.normalX,e.normalY),x=t.dotXY(d,y,e.normalX,e.normalY),b=o.invMass+a.invMass;b+=o.invI*(t.dotXY(l,c,l,c)-u*u)+a.invI*(t.dotXY(d,y,d,y)-x*x),e.massNormal=1/b;let E=e.normalY,M=-1*e.normalX,v=t.dotXY(l,c,E,M),V=t.dotXY(d,y,E,M),p=o.invMass+a.invMass;if(p+=o.invI*(t.dotXY(l,c,l,c)-v*v)+a.invI*(t.dotXY(d,y,d,y)-V*V),e.massTangent=1/p,e.bias=-n*s*Math.min(0,e.separation+.01),r){let t=e.Pn*e.normalX+e.Pt*E,s=e.Pn*e.normalY+e.Pt*M;o.velocity.x-=o.invMass*t,o.velocity.y-=o.invMass*s,o.angularVelocity-=o.invI*(l*s-c*t),a.velocity.x+=a.invMass*t,a.velocity.y+=a.invMass*s,a.angularVelocity+=a.invI*(d*s-y*t)}}}applyImpulse(){let s=this.contacts,i=this.numContacts,e=this.body1,n=this.body2,o=this.world.accumulateImpulses;for(let a=0;a<i;a++){let i=s[a];i.r1X=i.positionX-e.position.x,i.r1Y=i.positionY-e.position.y,i.r2X=i.positionX-n.position.x,i.r2Y=i.positionY-n.position.y;let r=n.velocity.x+-n.angularVelocity*i.r2Y-e.velocity.x,h=n.velocity.y+n.angularVelocity*i.r2X-e.velocity.y,l=r- -e.angularVelocity*i.r1Y,c=h-e.angularVelocity*i.r1X,d=t.dotXY(l,c,i.normalX,i.normalY),y=i.massNormal*(-d+i.bias);if(o){let t=i.Pn;i.Pn=Math.max(t+y,0),y=i.Pn-t}else y=Math.max(y,0);let u=y*i.normalX,x=y*i.normalY;e.velocity.x-=e.invMass*u,e.velocity.y-=e.invMass*x,e.angularVelocity-=e.invI*t.crossXY(i.r1X,i.r1Y,u,x),n.velocity.x+=n.invMass*u,n.velocity.y+=n.invMass*x,n.angularVelocity+=n.invI*t.crossXY(i.r2X,i.r2Y,u,x);let b=i.normalY,E=-1*i.normalX,v=t.dotXY(l,c,b,E),V=i.massTangent*-v;if(o){let t=this.friction*i.Pn,s=i.Pt;i.Pt=M(s+V,-t,t),V=i.Pt-s}else{let t=this.friction*y;V=M(V,-t,t)}u=V*b,x=V*E,e.velocity.x-=e.invMass*u,e.velocity.y-=e.invMass*x,e.angularVelocity-=e.invI*t.crossXY(i.r1X,i.r1Y,u,x),n.velocity.x+=n.invMass*u,n.velocity.y+=n.invMass*x,n.angularVelocity+=n.invI*t.crossXY(i.r2X,i.r2X,u,x)}}}class W{constructor(t,s){this.bodyA=t,this.bodyB=s,this.value=t.id+":"+s.id}}class R{constructor(t,s){this.first=t,this.second=s}}let z,H=new class{constructor(s=new t(0,9.807),i=10){this.bodyIdSeed=0,this.bodies=[],this.joints=[],this.arbiters=[],this.gravity=new t,this.iterations=10,this.accumulateImpulses=!0,this.warmStarting=!0,this.positionCorrection=!0,this.gravity.x=s.x,this.gravity.y=s.y,this.iterations=i}addBody(t){return this.bodyIdSeed++,t.id=this.bodyIdSeed,this.bodies.push(t),this}addJoint(t){return this.joints.push(t),this}clear(){return this.bodies=[],this.joints=[],this.arbiters=[],this}broadPhase(){let t=this.bodies,s=t.length,i=this.arbiters;for(let e=0;e<s-1;e++){let n=t[e];for(let o=e+1;o<s;o++){let s=t[o];if(0===n.invMass&&0===s.invMass)continue;let e=new J(this,n,s),a=new W(n,s),r=-1;for(let t=0;t<i.length;t++)if(i[t].first.value===a.value){r=t;break}e.numContacts>0?-1===r?i.push(new R(a,e)):i[r].second.update(e.contacts,e.numContacts):0===e.numContacts&&r>-1&&i.splice(r,1)}}}step(t){let s=t>0?1/t:0;this.broadPhase();const i=this.bodies,e=this.gravity;for(let s=0;s<i.length;s++){let n=i[s];0!==n.invMass&&(n.velocity.x+=t*(e.x+n.invMass*n.force.x),n.velocity.y+=t*(e.y+n.invMass*n.force.y),n.angularVelocity+=t*n.invI*n.torque)}const n=this.arbiters,o=this.joints;for(let t=0;t<n.length;t++)n[t].second.preStep(s);for(let t=0;t<o.length;t++)o[t].preStep(s);for(let t=0;t<this.iterations;t++){for(let t=0;t<n.length;t++)n[t].second.applyImpulse();for(let t=0;t<o.length;t++)o[t].applyImpulse()}for(let s=0;s<i.length;s++){let e=i[s];e.position.x+=t*e.velocity.x,e.position.y+=t*e.velocity.y,e.rotation+=t*e.angularVelocity,e.force.set(0,0),e.torque=0}}}(new t(0,40),10),K=new s(new t(2e3,80),Number.MAX_VALUE);K.position.set(500,500),H.addBody(K);let Q=new t(300,-150);for(let i=0;i<10;i++)for(let e=0;e<10;e++)z=new s(new t(12,12),5),z.position.set(Q.x+16*i,Q.y+16*e),z.velocity.y=-50+e,H.addBody(z);let Z=new s(new t(25,25),Number.MAX_VALUE);Z.position.set(530,50),H.addBody(Z);let $=new s(new t(50,50),900);$.position.set(685,40),H.addBody($);let tt=new class{constructor(){this.M=new i,this.localAnchor1=new t,this.localAnchor2=new t,this.r1=new t,this.r2=new t,this.bias=new t,this.P=new t,this.biasFactor=.2,this.softness=0}set(s,r,h,l){this.world=s,this.body1=r,this.body2=h,e.set(r.rotation),n.set(h.rotation),o.transpose(r.rotation),a.transpose(h.rotation),t.subV(l,r.position,y),t.subV(l,h.position,u),i.mulMVV(o,y,this.localAnchor1),i.mulMVV(a,u,this.localAnchor2)}preStep(s){const o=this.body1,a=this.body2;e.set(o.rotation),n.set(a.rotation);let b=i.mulMVV(e,this.localAnchor1,this.r1),E=i.mulMVV(n,this.localAnchor2,this.r2);r.setValues(o.invMass+a.invMass,0,0,o.invMass+a.invMass),h.setValues(o.invI*b.y*b.y,-o.invI*b.x*b.y,-o.invI*b.x*b.y,o.invI*b.x*b.x),l.setValues(a.invI*E.y*E.y,-a.invI*E.x*E.y,-a.invI*E.x*E.y,a.invI*E.x*E.x),i.addV(r,h,c),i.addV(c,l,d),d.a+=this.softness,d.d+=this.softness,i.invertV(d,this.M),t.addV(o.position,b,y),t.addV(a.position,E,u),t.subV(u,y,x),this.world.positionCorrection?t.mulSVV(-this.biasFactor,t.mulSVV(s,x,y),this.bias):this.bias.set(0,0),this.world.warmStarting?(o.velocity.sub(t.mulSVV(o.invMass,this.P,y)),o.angularVelocity-=o.invI*t.crossVV(b,this.P),a.velocity.add(t.mulSVV(a.invMass,this.P,y)),a.angularVelocity+=a.invI*t.crossVV(E,this.P)):this.P.set(0,0)}applyImpulse(){const s=this.body1,e=this.body2,n=this.r1,o=this.r2;t.crossSVV(e.angularVelocity,o,y),t.addV(e.velocity,y,u),t.subV(u,s.velocity,x),t.crossSVV(s.angularVelocity,n,b);let a=t.subV(x,b,y);t.subV(this.bias,a,u),t.mulSVV(this.softness,this.P,x),t.subV(u,x,b),i.mulMVV(this.M,b,E),s.velocity.sub(t.mulSVV(s.invMass,E,y)),s.angularVelocity-=s.invI*t.crossVV(n,E),e.velocity.add(t.mulSVV(e.invMass,E,y)),e.angularVelocity+=e.invI*t.crossVV(o,E),this.P.add(E)}};tt.set(H,Z,$,Z.position),H.addJoint(tt);let st=new class{constructor(s){this.canvas=s,this.context=s.getContext("2d"),this._M0=new i,this._M1=new i,this._v1=new t,this._v2=new t,this._v3=new t,this._v4=new t,this._orientation=new t}render(t){const s=this.context,i=t.bodies,e=t.joints,n=t.arbiters;s.clearRect(0,0,this.canvas.width,this.canvas.height);for(let t=0;t<i.length;t++)this.renderBody(i[t],s);for(let t=0;t<n.length;t++){let i=n[t].second;for(let t=0;t<i.contacts.length;t++)this.renderContact(i.contacts[t],s)}for(let t=0;t<e.length;t++)this.renderJoint(e[t],s)}renderBody(t,s){this._M0.set(t.rotation);let i=t.position,e=.5*t.width.x,n=.5*t.width.y;const o=this._v1,a=this._v2,r=this._v3,h=this._v4;o.set(i.x+(this._M0.a*-e+this._M0.b*-n),i.y+(this._M0.c*-e+this._M0.d*-n)),a.set(i.x+(this._M0.a*e+this._M0.b*-n),i.y+(this._M0.c*e+this._M0.d*-n)),r.set(i.x+(this._M0.a*e+this._M0.b*n),i.y+(this._M0.c*e+this._M0.d*n)),h.set(i.x+(this._M0.a*-e+this._M0.b*n),i.y+(this._M0.c*-e+this._M0.d*n));const l=this._orientation;l.set(i.x+this._M0.a*e,i.y+this._M0.c*e),s.strokeStyle="black",s.lineWidth=.5,s.beginPath(),s.arc(t.position.x,t.position.y,2,0,2*Math.PI),s.moveTo(o.x,o.y),s.lineTo(a.x,a.y),s.lineTo(r.x,r.y),s.lineTo(h.x,h.y),s.lineTo(o.x,o.y),s.moveTo(i.x,i.y),s.lineTo(l.x,l.y),s.stroke()}renderContact(t,s){s.strokeStyle="red",s.lineWidth=.5,s.beginPath(),s.arc(t.positionX,t.positionY,2,0,2*Math.PI),s.stroke()}renderJoint(t,s){let i=t.body1,e=t.body2;this._M0.set(i.rotation),this._M1.set(e.rotation);let n=i.position,o=e.position;const a=this._v1,r=this._v2;a.set(n.x+(this._M0.a*t.localAnchor1.x+this._M0.b*t.localAnchor1.y),n.y+(this._M0.c*t.localAnchor1.x+this._M0.d*t.localAnchor1.y)),r.set(o.x+(this._M1.a*t.localAnchor2.x+this._M1.b*t.localAnchor2.y),o.y+(this._M1.c*t.localAnchor2.x+this._M1.d*t.localAnchor2.y)),s.beginPath(),s.moveTo(n.x,n.y),s.lineTo(a.x,a.y),s.lineTo(o.x,o.y),s.lineTo(r.x,r.y),s.stroke()}}(document.getElementById("demo")),it=!0,et=0,nt=document.getElementById("frame"),ot=document.getElementById("bodies"),at=document.getElementById("arbiters");document.getElementById("pause").addEventListener("click",()=>{it=!it}),function t(){it||(H.step(1/30),st.render(H),nt.value=et.toString(),ot.value=H.bodies.length.toString(),at.value=H.arbiters.length.toString(),et++),requestAnimationFrame(t)}()}();
